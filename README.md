# simple-reg-bot
 Простой бот для проверки регистрации пользователя.  
 Посредством API запроса проверяет наличие пользователя в базе данных. 
 Возвращает полученную ссылку.
 API сервер должен принимать на проверку три значения, полученные с помощью POST запроса:
 - phone
 - chat_id
 - username

 ### Установка
 Уже должен быть установлен Python3 и pip.  
 Склонируйте проект к себе.
 Желательно предварительно установить виртуальное окружение. Например, `venv`:
 ```bash
 python3 -m venv venv
 ```
 Для активации на Ubuntu ввести:
 ```bash
 source venv/bin/activate
 ```
 На Windows:
 ```bash
 venv\Scripts\Activate
 ```  
 Для подключения зависимостей запустите команду:
 ```bash
 pip install -r requirements.txt
 ```

 Бот использует тип оповещения Webhook. Для его работы нужен действующий сертификат SSL и ключ к нему.

 В корне проекта создайте файл `.env`. В него положите следующие переменные:
 ```bash
 API_URL=<Адрес API сервера>

 API_GUEST_URL=<Адрес API для получение гостевой ссылки>

 TG_BOT_TOKEN=<Токен бота в Телеграм>

 ADMIN_CHAT_ID=<ID телеграм чата админа, который будет получать сообщения от пользователей>

 PUBLIC_IP=<IP адрес или доменное имя сервера в формате `https://111.222.333.444`>

 CERT_PATH=<Путь к сертификату SSL>

 KEY_PATH=<Путь к ключу от сертификата SSL>
 ```


 ### Запуск

 Команда запуска:
 ```bash
 python3 tg_bot.py
 ```
 В случае ошибки бота, выдается сообщение об ошибке в консоль, и бот перезапускается через 5 секунд.
